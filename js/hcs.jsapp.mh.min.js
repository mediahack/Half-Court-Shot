/**
* @name     Half Court Shot
* @author <codes>      mediaHACK - http://mediahack.com
* @author <pretties>       Rogie - http://rog.ie
* @date         2013.12.13
* @version  1.2
*
* A JSApp that taps the Dribbble API (http://dribbble.com/api) to
* show off a shots and such from players. 
*
* This has been a mediaHACK and Rogie  collab. Our powers
* combined are Super-Sonic-Bionic. Trust pound.
*
* @copyright   whatevs
* @licence  MIT Licensed. Nice if you give origination cred.
* 
**/
function HalfCourtShot(settings){var self=this;self.settings=settings,self.play,self.goal=document.getElementsByTagName("body")[0];var allstarsIMO=["rogie","simplebits","shauninman","jsm","squaredeye"],cointoss=Math.floor(5*Math.random());self.player=allstarsIMO[cointoss],self.jersey=self.player,self.shots=0,self.page=1,self.per_page,self.following=!1,self.className="hcs",self.apiUrl="http://api.dribbble.com/",self.playType="players",self.url="",HalfCourtShot.currentIndex=HalfCourtShot.currentIndex||0,self.index=HalfCourtShot.currentIndex++,self.debug=!1,self.callThePlay=function(a){var b=this;if(null!=b.settings){for(var c in b.settings)void 0!=b[c]&&(b[c]=b.settings[c]);"function"==typeof a&&a()}},self.shootDaBall=function(){var a=this;"HalfCourtShot.callback"+a.index,HalfCourtShot["callback"+a.index]=function(b){a.jumboTron(b)},a.genUrl(function(){var b="halfCourtShot"+a.currentIndex;HalfCourtShot[b]=document.createElement("script"),HalfCourtShot[b].setAttribute("id",b),HalfCourtShot[b].setAttribute("type","text/javascript"),HalfCourtShot[b].setAttribute("src",a.url),document.getElementsByTagName("body")[0].appendChild(HalfCourtShot[b])})},self.jumboTron=function(a){var b=this,c=document.createElement("div");c.setAttribute("class",b.className);var d=document.createElement("ul"),e=document.createElement("ul"),f=b.shots?b.shots:a.shots.length;if(f>a.shots.length&&(f=a.shots.length),b.warmUp&&(f+=b.numberOfLayups),a.shots)for(var h=0;f>h;h++){var i=b.buildImageListItem(a.shots[h]);d.appendChild(i)}else if(a.image_url||a.avatar_url){var i=b.buildImageListItem(a);d.appendChild(i)}c.appendChild(d),b.warmUp&&c.appendChild(e),"string"==typeof b.goal&&(b.goal=document.getElementById(b.goal)),b.goal.appendChild(c),b.goal.innerHTML=b.goal.innerHTML,b.onComplete&&b.onComplete()},self.buildImageListItem=function(a){var b=a.image_url?a.image_url:a.avatar_url,c=document.createElement("a");c.setAttribute("href",a.url),c.setAttribute("title",a.title);var d=document.createElement("img");d.setAttribute("src",b);var e=document.createElement("span");e.setAttribute("class","overlay"),a.width&&d.setAttribute("width",a.width),a.height&&d.setAttribute("height",a.height),a.title?d.setAttribute("title",a.title):a.name&&d.setAttribute("title",a.name),a.title?d.setAttribute("alt",a.title):a.name&&d.setAttribute("alt",a.name),c.appendChild(d),c.appendChild(e);var f=document.createElement("li");return f.appendChild(c),f},self.genUrl=function(cb){var self=this,randomNo=Math.floor(9999999*Math.random()),pageOpts="";if("string"==typeof self.jersey&&(void 0!=self.page&&(pageOpts="&page="+self.page),void 0!=self.per_page?pageOpts=pageOpts+"&per_page="+self.per_page:self.shots<=30&&(pageOpts=pageOpts+"&shots="+self.shots+"&per_page="+self.shots)),"shots"==self.playType){var pageOpts="";self.url="debuts"==self.jersey||"everyone"==self.jersey||"popular"==self.jersey?self.apiUrl+self.playType+"/"+self.jersey+"/"+"?"+pageOpts+"&r="+randomNo+"&callback=HalfCourtShot.callback"+self.index:self.apiUrl+self.playType+"/"+self.jersey+"/"+"?r="+randomNo+"&callback=HalfCourtShot.callback"+self.index,self.debug&&console.log(self.url)}else if("players"==self.playType){var jerseyType=parseInt(self.jersey);if(parseInt(self.jersey))self.url=self.apiUrl+self.playType+"/"+self.jersey+"/?r="+randomNo+"&callback=HalfCourtShot.callback"+self.index;else{var followingOpts=eval(self.following)?"following/":"";self.url=self.apiUrl+self.playType+"/"+self.jersey+"/shots/"+followingOpts+"?r="+randomNo+"&callback=HalfCourtShot.callback"+self.index+pageOpts}}"function"==typeof cb&&cb()},self.rideThePine=function(a){self.debug&&console.log(this[a])},self.hitTheFloor=function(){var a=this;a.callThePlay(function(){a.shootDaBall()})},self.hitTheFloor()}
